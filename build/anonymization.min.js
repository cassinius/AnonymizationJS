!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(t){var n=r(1),o=r(3),i=r(4),s=r(5),a=r(6),d=r(22),u="undefined"!=typeof window?window:t;u.$A={config:{adults:a.CONFIG,houses:d.CONFIG},genHierarchy:{Category:n.StringGenHierarchy,Range:n.ContGenHierarchy},IO:{CSVIN:o.CSVInput,CSVOUT:i.CSVOutput},algorithms:{Sangreea:s.SaNGreeA}},e.exports=u.$A}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=r(2),o=function(){function e(e){this.file=e,this._entries={},this._nr_levels=0;var t;t="undefined"==typeof window?JSON.parse(n.readFileSync(e).toString()):JSON.parse(e),this._name=t.name,this.readFromJson(t)}return e.prototype.readFromJson=function(e){var t=0;for(var r in e.entries){var n=e.entries[r],o=+n.level;0===o&&t++,o>this._nr_levels&&(this._nr_levels=o);var i={name:n.name,gen:n.gen,level:n.level};this._entries[r]=i}if(1!==t)throw new Error("JSON invalid. Level 0 must contain exactly 1 entry.")},e.prototype.nrLevels=function(){return this._nr_levels},e.prototype.getEntries=function(){return this._entries},e.prototype.getLevelEntry=function(e){return this._entries[e]?this._entries[e].level:void 0},e.prototype.getGeneralizationOf=function(e){return this._entries[e]?this._entries[e].gen:void 0},e.prototype.getName=function(e){return this._entries[e].name},e}();t.StringGenHierarchy=o;var i=function(){function e(e,t,r){if(this._name=e,this._min=t,this._max=r,t>r)throw new Error(this._name+": Range invalid. Min ("+t+") greater than Max ("+r+").");if(t===r)throw new Error(this._name+": Range invalid. Min ("+t+") equals Max ("+r+").")}return e.prototype.genCostOfRange=function(e,t){if(e>t)throw new Error("Cannot generalize to negative range.");if(e<this._min)throw new Error("Cannot generalize span. From parameter less than range min.");if(t>this._max)throw new Error("Cannot generalize span. To parameter greater than range max.");return(t-e)/(this._max-this._min)},e}();t.ContGenHierarchy=i},function(e,t){},function(e,t,r){"use strict";var n=r(2),o=r(2),i=function(){function e(e){this._SEP=new RegExp(e.SEPARATOR,e.SEP_MOD),this._TRIM=new RegExp(e.TRIM,e.TRIM_MOD)}return e.prototype.readCSVFromFile=function(e){return n.readFileSync(e).toString().split("\n")},e.prototype.readCSVFromURL=function(e,t){var r;"undefined"!=typeof window?(r=new XMLHttpRequest,r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText.split("\n"))},r.open("GET",e,!0),r.setRequestHeader("Content-Type","text/csv; charset=UTF-8"),r.send()):this.retrieveRemoteFile(e,t)},e.prototype.retrieveRemoteFile=function(e,t){if("function"!=typeof t)throw new Error("Provided callback is not a function.");return o.get(e,function(e){var r="";e.on("data",function(e){r+=e}),e.on("end",function(){t(r.toString().split("\n"))})})},e}();t.CSVInput=i},function(e,t,r){"use strict";var n=r(2),o=function(){function e(e){this._SEP=new RegExp(e.SEPARATOR,e.SEP_MOD),this._TRIM=new RegExp(e.TRIM,e.TRIM_MOD)}return e.prototype.outputCSVToFile=function(e,t){n.writeFileSync("./test/io/test_output/"+e+".csv",t)},e}();t.CSVOutput=o},function(e,t,r){"use strict";var n=r(1),o=r(6),i=r(4),s=r(7),a=r(20);console.log(s.BaseGraph),function(e){e[e.CONTINUOUS=0]="CONTINUOUS",e[e.CATEGORICAL=1]="CATEGORICAL"}(t.HierarchyType||(t.HierarchyType={}));var d=(t.HierarchyType,function(){function e(e,t){if(void 0===e&&(e="default"),this._name=e,this.config=t,this._cont_hierarchies={},this._cat_hierarchies={},this._range_hierarchy_indices={},this._categorical_hierarchy_indices={},this._config=t||o.CONFIG,""===this._config.INPUT_FILE)throw new Error("Input file cannot be an empty string");if(this._config.NR_DRAWS<0)throw new Error("Options invalid. Nr_draws can not be negative.");if(this._config.EDGE_MIN<0)throw new Error("Options invalid. Edge_min can not be negative.");if(this._config.EDGE_MAX<0)throw new Error("Options invalid. Edge_max can not be negative.");if(this._config.EDGE_MAX<this._config.EDGE_MIN)throw new Error("Options invalid. Edge_min cannot exceed edge_max.");this._graph=new s.BaseGraph(this._name),this._perturber=new a.SimplePerturber(this._graph),this._SEP=new RegExp(this._config.SEPARATOR,this._config.SEP_MOD),this._TRIM=new RegExp(this._config.TRIM,this._config.TRIM_MOD),this._csvOUT=new i.CSVOutput(this._config)}return e.prototype.getConfig=function(){return this._config},e.prototype.getContHierarchies=function(){return this._cont_hierarchies},e.prototype.getCatHierarchies=function(){return this._cat_hierarchies},e.prototype.getContHierarchy=function(e){return this._cont_hierarchies[e]},e.prototype.getCatHierarchy=function(e){return this._cat_hierarchies[e]},e.prototype.setContHierarchy=function(e,t){this._cont_hierarchies[e]=t},e.prototype.setCatHierarchy=function(e,t){this._cat_hierarchies[e]=t},e.prototype.instantiateGraph=function(e,t){void 0===t&&(t=!0);var r=e.shift().trim().replace(this._TRIM,"").split(this._SEP);this.instantiateRangeHierarchies(e,r),this.readCSV(e,r,this._graph),t&&this._perturber.createRandomEdgesSpan(this._config.EDGE_MIN,this._config.EDGE_MAX,!1)},e.prototype.instantiateRangeHierarchies=function(e,t){var r=this,o=(Object.keys(this._cont_hierarchies),Object.keys(this._config.GEN_WEIGHT_VECTORS[this._config.VECTOR].range));if(!(o.length<1)){t.forEach(function(e,t){o.indexOf(e)!==-1&&(r._range_hierarchy_indices[e]=t)});var i={};o.forEach(function(e){i[e]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}});for(var s=NaN,a=0;a<e.length;a++)if(e[a]){var d=e[a].trim().replace(this._TRIM,"").split(this._SEP);o.forEach(function(e){s=parseFloat(d[r._range_hierarchy_indices[e]]),s<i[e].min&&(i[e].min=s),s>i[e].max&&(i[e].max=s)})}o.forEach(function(e){var t=new n.ContGenHierarchy(e,i[e].min,i[e].max);r.setContHierarchy(t._name,t)})}},e.prototype.readCSV=function(e,t,r){var n=Object.keys(this._cont_hierarchies),o=Object.keys(this._cat_hierarchies),i={};t.forEach(function(e,t){n.indexOf(e)!==-1&&(i[t]=e)});var s={};t.forEach(function(e,t){o.indexOf(e)!==-1&&(s[t]=e)});var a=t.indexOf(this._config.TARGET_COLUMN);if(a<0)throw new Error("Target column does not exist... aborting.");for(var d=this._config.NR_DRAWS,u=0;u<d;u++)if(e[u]){var h=e[u].trim().replace(this._TRIM,"").split(this._SEP),c=!0;for(var _ in s){var g=this.getCatHierarchy(s[_]);g&&!g.getLevelEntry(h[_])&&(c=!1)}for(var _ in i){this.getContHierarchy(i[_]);+h[_]!==+h[_]&&(c=!1)}if(c){var l=this._graph.addNodeByID(""+u);for(var _ in s)l.setFeature(s[_],h[_]);for(var _ in i)l.setFeature(i[_],+h[_]);l.setFeature(this._config.TARGET_COLUMN,h[a])}else d++}},e.prototype.constructPreprocCSV=function(e){var t="",r=this._graph.getNodes(),n=null,o=0;Object.keys(this._cont_hierarchies).forEach(function(e){t+=e+", "}),Object.keys(this._cat_hierarchies).forEach(function(e){t+=e+", "}),t+=this._config.TARGET_COLUMN+"\n",e=e||{};var i=e.random,s=parseFloat(e.prob),a=e.feat,d=e.value,u=e.group,h=0|+e.nr_bins;console.log("nr bins: "+h);var c=Number.NEGATIVE_INFINITY;for(var _ in this._graph.getNodes()){if(n=r[_],null!=s&&null!=a&&null!=d){if(i&&Math.random()<s){o++;continue}if(parseFloat(d)!==parseFloat(d)){if(Math.random()<s&&n.getFeature(a)===d){o++;continue}}else if(u){var g=this.getContHierarchy(a)._min,l=this.getContHierarchy(a)._max,p=l-g,f=p/h,y=(+n.getFeature(a)-g)/f|0;c=y>c?y:c,n.setFeature(a,y)}else if(Math.random()<s&&n.getFeature(a)>d){o++;continue}}Object.keys(this._cont_hierarchies).forEach(function(e){t+=n.getFeature(e)+", "}),Object.keys(this._cat_hierarchies).forEach(function(e){t+=n.getFeature(e)+", "}),t+=n.getFeature(this._config.TARGET_COLUMN)+"\n"}return console.log("Max bin used: "+c),console.log("Eliminated "+o+" rows from a DS of "+this._graph.nrNodes()+" rows."),t},e.prototype.outputPreprocCSV=function(e,t){var r=this.constructPreprocCSV(t);this._csvOUT.outputCSVToFile(e,r)},e.prototype.constructAnonymizedCSV=function(){var e=this,t="";Object.keys(this._cont_hierarchies).forEach(function(e){t+=e+", "}),Object.keys(this._cat_hierarchies).forEach(function(e){t+=e+", "}),t+=this._config.TARGET_COLUMN+"\n";for(var r in this._clusters){var n=this._clusters[r],o=n.nodes;for(var i in o)Object.keys(this._cont_hierarchies).forEach(function(r){var o=n.gen_ranges[r];if(o[0]===o[1])t+=o[0]+", ";else if(e._config.AVERAGE_OUTPUT_RANGES){var i=(o[0]+o[1])/2;t+=i+", "}else t+="["+o[0]+" - "+o[1]+"], "}),Object.keys(this._cat_hierarchies).forEach(function(r){var o=e._cat_hierarchies[r];t+=o.getName(n.gen_feat[r])+", "}),t+=o[i].getFeature(this._config.TARGET_COLUMN)+"\n"}return t},e.prototype.outputAnonymizedCSV=function(e){var t=this.constructAnonymizedCSV();this._csvOUT.outputCSVToFile(e,t)},e.prototype.anonymizeGraph=function(){var e,t,r,n,o,i,s,a,d,u=this,h=[],c=this._graph.getNodes(),_=Object.keys(c),g={},l=Object.keys(c).length;for(a=0;a<_.length;a++)if(e=c[_[a]],!g[e.getID()]){var p={nodes:{},gen_feat:{},gen_ranges:{}};for(Object.keys(this._cat_hierarchies).forEach(function(t){p.gen_feat[t]=e.getFeature(t)}),Object.keys(this._cont_hierarchies).forEach(function(t){p.gen_ranges[t]=[e.getFeature(t),e.getFeature(t)]}),p.nodes[e.getID()]=e,g[e.getID()]=!0,l--;Object.keys(p.nodes).length<this._config.K_FACTOR&&l;){for(s=Number.POSITIVE_INFINITY,d=a+1;d<_.length;d++)t=c[_[d]],g[t.getID()]||(n=this.calculateGIL(p,t),o=this._config.BETA>0?this.calculateSIL(p,t):0,i=this._config.ALPHA*n+this._config.BETA*o,i<s&&(s=i,r=t));p.nodes[r.getID()]=r,this.updateLevels(p,r),Object.keys(this._cont_hierarchies).forEach(function(e){u.updateRange(p.gen_ranges[e],r.getFeature(e))}),g[r.getID()]=!0,l--}h.push(p)}console.log("Built "+h.length+" clusters."),this._clusters=h},e.prototype.calculateGIL=function(e,t){return this.calculateCatCosts(e,t)+this.calculateContCosts(e,t)},e.prototype.calculateSIL=function(e,t){var r=this._graph.nrNodes()-2,n=[],o=t.reachNodes().map(function(e){return e.node.getID()});for(var i in e.nodes){var s=r,a=e.nodes[i].reachNodes().map(function(e){return e.node.getID()});for(var d in a){var u=a[d];u!==t.getID()&&o.indexOf(u)!==-1&&--s}n.push(s/r)}return n.reduce(function(e,t){return e+t},0)/n.length},e.prototype.calculateCatCosts=function(e,t){var r=0;for(var n in this._cat_hierarchies){for(var o=this.getCatHierarchy(n),i=e.gen_feat[n],s=t.getFeature(n),a=o.getLevelEntry(i),d=o.getLevelEntry(s);i!==s;)s=o.getGeneralizationOf(s),d=o.getLevelEntry(s),a>d&&(i=o.getGeneralizationOf(i),a=o.getLevelEntry(i));var u=this._config.GEN_WEIGHT_VECTORS[this._config.VECTOR].categorical;r+=u[n]*((o.nrLevels()-a)/o.nrLevels())}var h=Object.keys(this._cat_hierarchies).length;return h>1?r/h:r},e.prototype.calculateContCosts=function(e,t){var r=this,o=0,i=this._config.GEN_WEIGHT_VECTORS[this._config.VECTOR].range;Object.keys(this._cont_hierarchies).forEach(function(s){var a=r.getContHierarchy(s),d=e.gen_ranges[s],u=r.expandRange(d,t.getFeature(s)),h=a instanceof n.ContGenHierarchy?a.genCostOfRange(u[0],u[1]):0;o+=i[s]+h});var s=Object.keys(this._cont_hierarchies).length;return s>1?o/s:o},e.prototype.updateLevels=function(e,t){for(var r in this._cat_hierarchies){for(var n=this.getCatHierarchy(r),o=e.gen_feat[r],i=t.getFeature(r),s=n.getLevelEntry(o),a=n.getLevelEntry(i);o!==i;)i=n.getGeneralizationOf(i),a=n.getLevelEntry(i),s>a&&(o=n.getGeneralizationOf(o),s=n.getLevelEntry(o));e.gen_feat[r]=o}},e.prototype.expandRange=function(e,t){var r=t<e[0]?t:e[0],n=t>e[1]?t:e[1];return[r,n]},e.prototype.updateRange=function(e,t){e[0]<e[0]?t:e[0],e[1]=t>e[1]?t:e[1]},e}());t.SaNGreeA=d},function(e,t){"use strict";var r={REMOTE_URL:"http://berndmalle.com/anonymization/adults",REMOTE_TARGET:"education",INPUT_FILE:"./test/io/test_input/adult_data.csv",TRIM:"\\s+",TRIM_MOD:"g",SEPARATOR:",",SEP_MOD:"",TARGET_COLUMN:"marital-status",AVERAGE_OUTPUT_RANGES:!0,NR_DRAWS:300,RANDOM_DRAWS:!1,EDGE_MIN:2,EDGE_MAX:10,K_FACTOR:50,ALPHA:1,BETA:0,GEN_WEIGHT_VECTORS:{equal:{categorical:{workclass:1/13,"native-country":1/13,sex:1/13,race:1/13,relationship:1/13,occupation:1/13,income:1/13},range:{age:1/13,fnlwgt:1/13,"education-num":1/13,"capital-gain":1/13,"capital-loss":1/13,"hours-per-week":1/13}},emph_race:{categorical:{workclass:.01,"native-country":.01,sex:.01,race:.88,relationship:.01,occupation:.01,income:.01},range:{age:.01,fnlwgt:.01,"education-num":.01,"capital-gain":.01,"capital-loss":.01,"hours-per-week":.01}},emph_age:{categorical:{workclass:.01,"native-country":.01,sex:.01,race:.01,relationship:.01,occupation:.01,income:.01},range:{age:.88,fnlwgt:.01,"education-num":.01,"capital-gain":.01,"capital-loss":.01,"hours-per-week":.01}}},VECTOR:"equal"};t.CONFIG=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(8),i=r(10),s=r(9),a=r(11),d=r(14),u=r(16),h=r(17),c=(new a.Logger,1);!function(e){e[e.INIT=0]="INIT",e[e.DIRECTED=1]="DIRECTED",e[e.UNDIRECTED=2]="UNDIRECTED",e[e.MIXED=3]="MIXED"}(n=t.GraphMode||(t.GraphMode={}));var _=function(){function e(e){this._label=e,this._nr_nodes=0,this._nr_dir_edges=0,this._nr_und_edges=0,this._mode=n.INIT,this._nodes={},this._dir_edges={},this._und_edges={}}return e.prototype.toDirectedGraph=function(e){void 0===e&&(e=!1);var t=e?this.clone():this;if(0===this._nr_dir_edges&&0===this._nr_und_edges)throw new Error("Cowardly refusing to re-interpret an empty graph.");return t},e.prototype.toUndirectedGraph=function(){return this},e.prototype.hasNegativeEdge=function(){var e,t=!1;for(var r in this._und_edges)if(e=this._und_edges[r],e.isWeighted()&&e.getWeight()<0)return!0;for(var r in this._dir_edges)if(e=this._dir_edges[r],e.isWeighted()&&e.getWeight()<0){t=!0;break}return t},e.prototype.hasNegativeCycles=function(e){var t=this;if(!this.hasNegativeEdge())return!1;var r=!1,n=e?e:this.getRandomNode();return u.DFS(this,n).forEach(function(e){var n,o=Number.POSITIVE_INFINITY;Object.keys(e).forEach(function(t){o>e[t].counter&&(o=e[t].counter,n=t)}),h.BellmanFordArray(t,t._nodes[n]).neg_cycle&&(r=!0)}),r},e.prototype.nextArray=function(e){void 0===e&&(e=!1);for(var t=[],r=Object.keys(this._nodes),n=this.adjListDict(e,!0,0),o=0;o<this._nr_nodes;++o){t.push([]);for(var i=0;i<this._nr_nodes;++i)t[o].push([]),t[o][i].push(o===i?i:isFinite(n[r[o]][r[i]])?i:null)}return t},e.prototype.adjListArray=function(e){void 0===e&&(e=!1);for(var t=[],r=Object.keys(this._nodes),n=this.adjListDict(e,!0,0),o=0;o<this._nr_nodes;++o){t.push([]);for(var i=0;i<this._nr_nodes;++i)t[o].push(o===i?0:isFinite(n[r[o]][r[i]])?n[r[o]][r[i]]:Number.POSITIVE_INFINITY)}return t},e.prototype.adjListDict=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=0);var n,o,i,s={},a=this.getNodes();for(o in a)s[o]={},t&&(s[o][o]=r);for(o in a){var d=e?a[o].reachNodes().concat(a[o].prevNodes()):a[o].reachNodes();d.forEach(function(t){n=s[o][t.node.getID()]||Number.POSITIVE_INFINITY,i=isNaN(t.edge.getWeight())?c:t.edge.getWeight(),i<n?(s[o][t.node.getID()]=i,e&&(s[t.node.getID()][o]=i)):(s[o][t.node.getID()]=n,e&&(s[t.node.getID()][o]=n))})}return s},e.prototype.getMode=function(){return this._mode},e.prototype.getStats=function(){return{mode:this._mode,nr_nodes:this._nr_nodes,nr_und_edges:this._nr_und_edges,nr_dir_edges:this._nr_dir_edges,density_dir:this._nr_dir_edges/(this._nr_nodes*(this._nr_nodes-1)),density_und:2*this._nr_und_edges/(this._nr_nodes*(this._nr_nodes-1))}},e.prototype.nrNodes=function(){return this._nr_nodes},e.prototype.nrDirEdges=function(){return this._nr_dir_edges},e.prototype.nrUndEdges=function(){return this._nr_und_edges},e.prototype.addNodeByID=function(e,t){if(this.hasNodeID(e))throw new Error("Won't add node with duplicate ID.");var r=new o.BaseNode(e,t);return this.addNode(r)?r:null},e.prototype.addNode=function(e){if(this.hasNodeID(e.getID()))throw new Error("Won't add node with duplicate ID.");return this._nodes[e.getID()]=e,this._nr_nodes+=1,!0},e.prototype.cloneAndAddNode=function(e){var t=new o.BaseNode(e.getID());return t.setFeatures(s.clone(e.getFeatures())),this._nodes[e.getID()]=t,this._nr_nodes+=1,t},e.prototype.hasNodeID=function(e){return!!this._nodes[e]},e.prototype.getNodeById=function(e){return this._nodes[e]},e.prototype.getNodes=function(){return this._nodes},e.prototype.getRandomNode=function(){return this.pickRandomProperty(this._nodes)},e.prototype.deleteNode=function(e){var t=this._nodes[e.getID()];if(!t)throw new Error("Cannot remove un-added node.");var r=e.inDegree(),n=e.outDegree(),o=e.degree();r&&this.deleteInEdgesOf(e),n&&this.deleteOutEdgesOf(e),o&&this.deleteUndEdgesOf(e),delete this._nodes[e.getID()],this._nr_nodes-=1},e.prototype.hasEdgeID=function(e){return!!this._dir_edges[e]||!!this._und_edges[e]},e.prototype.getEdgeById=function(e){var t=this._dir_edges[e]||this._und_edges[e];if(!t)throw new Error("cannot retrieve edge with non-existing ID.");return t},e.prototype.checkExistanceOfEdgeNodes=function(e,t){if(!e)throw new Error("Cannot find edge. Node A does not exist (in graph).");if(!t)throw new Error("Cannot find edge. Node B does not exist (in graph).")},e.prototype.getDirEdgeByNodeIDs=function(e,t){var r=this.getNodeById(e),n=this.getNodeById(t);this.checkExistanceOfEdgeNodes(r,n);for(var o=r.outEdges(),i=Object.keys(o),s=0;s<i.length;s++){var a=o[i[s]];if(a.getNodes().b.getID()==t)return a}throw new Error("Cannot find edge. There is no edge between Node "+e+" and "+t+".")},e.prototype.getUndEdgeByNodeIDs=function(e,t){var r=this.getNodeById(e),n=this.getNodeById(t);this.checkExistanceOfEdgeNodes(r,n);for(var o=r.undEdges(),i=Object.keys(o),s=0;s<i.length;s++){var a,d=o[i[s]];if(a=d.getNodes().a.getID()==e?d.getNodes().b.getID():d.getNodes().a.getID(),a==t)return d}},e.prototype.getDirEdges=function(){return this._dir_edges},e.prototype.getUndEdges=function(){return this._und_edges},e.prototype.getDirEdgesArray=function(){var e=[];for(var t in this._dir_edges)e.push(this._dir_edges[t]);return e},e.prototype.getUndEdgesArray=function(){var e=[];for(var t in this._und_edges)e.push(this._und_edges[t]);return e},e.prototype.addEdgeByNodeIDs=function(e,t,r,n){var o=this.getNodeById(t),i=this.getNodeById(r);if(o){if(i)return this.addEdgeByID(e,o,i,n);throw new Error("Cannot add edge. Node B does not exist")}throw new Error("Cannot add edge. Node A does not exist")},e.prototype.addEdgeByID=function(e,t,r,n){var o=new i.BaseEdge(e,t,r,n||{});return this.addEdge(o)},e.prototype.addEdge=function(e){var t=e.getNodes().a,r=e.getNodes().b;if(!this.hasNodeID(t.getID())||!this.hasNodeID(r.getID())||this._nodes[t.getID()]!==t||this._nodes[r.getID()]!==r)throw new Error("can only add edge between two nodes existing in graph");return t.addEdge(e),e.isDirected()?(r.addEdge(e),this._dir_edges[e.getID()]=e,this._nr_dir_edges+=1,this.updateGraphMode()):(t!==r&&r.addEdge(e),this._und_edges[e.getID()]=e,this._nr_und_edges+=1,this.updateGraphMode()),e},e.prototype.deleteEdge=function(e){var t=this._dir_edges[e.getID()],r=this._und_edges[e.getID()];if(!t&&!r)throw new Error("cannot remove non-existing edge.");var n=e.getNodes();n.a.removeEdge(e),n.a!==n.b&&n.b.removeEdge(e),t?(delete this._dir_edges[e.getID()],this._nr_dir_edges-=1):(delete this._und_edges[e.getID()],this._nr_und_edges-=1),this.updateGraphMode()},e.prototype.deleteInEdgesOf=function(e){this.checkConnectedNodeOrThrow(e);var t,r,n=e.inEdges();for(t in n)r=n[t],r.getNodes().a.removeEdge(r),delete this._dir_edges[r.getID()],this._nr_dir_edges-=1;e.clearInEdges(),this.updateGraphMode()},e.prototype.deleteOutEdgesOf=function(e){this.checkConnectedNodeOrThrow(e);var t,r,n=e.outEdges();for(t in n)r=n[t],r.getNodes().b.removeEdge(r),delete this._dir_edges[r.getID()],this._nr_dir_edges-=1;e.clearOutEdges(),this.updateGraphMode()},e.prototype.deleteDirEdgesOf=function(e){this.deleteInEdgesOf(e),this.deleteOutEdgesOf(e)},e.prototype.deleteUndEdgesOf=function(e){this.checkConnectedNodeOrThrow(e);var t,r,n=e.undEdges();for(t in n){r=n[t];var o=r.getNodes();o.a.removeEdge(r),o.a!==o.b&&o.b.removeEdge(r),delete this._und_edges[r.getID()],this._nr_und_edges-=1}e.clearUndEdges(),this.updateGraphMode()},e.prototype.deleteAllEdgesOf=function(e){this.deleteDirEdgesOf(e),this.deleteUndEdgesOf(e)},e.prototype.clearAllDirEdges=function(){for(var e in this._dir_edges)this.deleteEdge(this._dir_edges[e])},e.prototype.clearAllUndEdges=function(){for(var e in this._und_edges)this.deleteEdge(this._und_edges[e])},e.prototype.clearAllEdges=function(){this.clearAllDirEdges(),this.clearAllUndEdges()},e.prototype.getRandomDirEdge=function(){return this.pickRandomProperty(this._dir_edges)},e.prototype.getRandomUndEdge=function(){return this.pickRandomProperty(this._und_edges)},e.prototype.clone=function(){var t,r=new e(this._label),n=this.getNodes(),o=null,i=null;for(var s in n)r.addNode(n[s].clone());return[this.getDirEdges(),this.getUndEdges()].forEach(function(e){for(var n in e)t=e[n],o=r.getNodeById(t.getNodes().a.getID()),i=r.getNodeById(t.getNodes().b.getID()),r.addEdge(t.clone(o,i))}),r},e.prototype.cloneSubGraph=function(t,r){var n=new e(this._label),o=d.prepareBFSStandardConfig(),i=function(e){o.result[e.next_node.getID()].counter>r?e.queue=[]:n.addNode(e.next_node.clone())};o.callbacks.node_unmarked.push(i),d.BFS(this,t,o);var s,a=null,u=null;return[this.getDirEdges(),this.getUndEdges()].forEach(function(e){for(var t in e)s=e[t],a=n.getNodeById(s.getNodes().a.getID()),u=n.getNodeById(s.getNodes().b.getID()),null!=a&&null!=u&&n.addEdge(s.clone(a,u))}),n},e.prototype.checkConnectedNodeOrThrow=function(e){var e=this._nodes[e.getID()];if(!e)throw new Error("Cowardly refusing to delete edges of un-added node.")},e.prototype.updateGraphMode=function(){var e=this._nr_dir_edges,t=this._nr_und_edges;e&&t?this._mode=n.MIXED:e?this._mode=n.DIRECTED:t?this._mode=n.UNDIRECTED:this._mode=n.INIT},e.prototype.pickRandomProperty=function(e){var t=Object.keys(e),r=t[Math.floor(Math.random()*t.length)];return e[r]},e.prototype.pickRandomProperties=function(e,t){for(var r=[],n=Object.keys(e),o=t/n.length,i={},s=0;r.length<t&&s<n.length;s++)Math.random()<o&&(r.push(n[s]),i[n[s]]=s);for(var a=t-r.length,s=0;s<n.length&&a;s++)null==i[n[s]]&&(r.push(n[s]),a--);return r},e}();t.BaseGraph=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=function(){function e(e,t){this._id=e,this._in_degree=0,this._out_degree=0,this._und_degree=0,this._in_edges={},this._out_edges={},this._und_edges={},this._features="undefined"!=typeof t?n.clone(t):{},this._label=this._features.label||this._id}return e.prototype.getID=function(){return this._id},e.prototype.getLabel=function(){return this._label},e.prototype.setLabel=function(e){this._label=e},e.prototype.getFeatures=function(){return this._features},e.prototype.getFeature=function(e){return this._features[e]},e.prototype.setFeatures=function(e){this._features=n.clone(e)},e.prototype.setFeature=function(e,t){this._features[e]=t},e.prototype.deleteFeature=function(e){var t=this._features[e];return delete this._features[e],t},e.prototype.clearFeatures=function(){this._features={}},e.prototype.inDegree=function(){return this._in_degree},e.prototype.outDegree=function(){return this._out_degree},e.prototype.degree=function(){return this._und_degree},e.prototype.addEdge=function(e){var t=e.getNodes();if(t.a!==this&&t.b!==this)throw new Error("Cannot add edge that does not connect to this node");var r=e.getID();if(e.isDirected())t.a!==this||this._out_edges[r]?this._in_edges[r]||(this._in_edges[e.getID()]=e,this._in_degree+=1):(this._out_edges[r]=e,this._out_degree+=1,t.b!==this||this._in_edges[r]||(this._in_edges[e.getID()]=e,this._in_degree+=1));else{if(this._und_edges[e.getID()])throw new Error("Cannot add same undirected edge multiple times.");this._und_edges[e.getID()]=e,this._und_degree+=1}},e.prototype.hasEdge=function(e){return!!this._in_edges[e.getID()]||!!this._out_edges[e.getID()]||!!this._und_edges[e.getID()]},e.prototype.hasEdgeID=function(e){return!!this._in_edges[e]||!!this._out_edges[e]||!!this._und_edges[e]},e.prototype.getEdge=function(e){var t=this._in_edges[e]||this._out_edges[e]||this._und_edges[e];if(!t)throw new Error("Cannot retrieve non-existing edge.");return t},e.prototype.inEdges=function(){return this._in_edges},e.prototype.outEdges=function(){return this._out_edges},e.prototype.undEdges=function(){return this._und_edges},e.prototype.dirEdges=function(){return n.mergeObjects([this._in_edges,this._out_edges])},e.prototype.allEdges=function(){return n.mergeObjects([this._in_edges,this._out_edges,this._und_edges])},e.prototype.removeEdge=function(e){if(!this.hasEdge(e))throw new Error("Cannot remove unconnected edge.");var t=e.getID(),r=this._und_edges[t];r&&(delete this._und_edges[t],this._und_degree-=1),r=this._in_edges[t],r&&(delete this._in_edges[t],this._in_degree-=1),r=this._out_edges[t],r&&(delete this._out_edges[t],this._out_degree-=1)},e.prototype.removeEdgeID=function(e){if(!this.hasEdgeID(e))throw new Error("Cannot remove unconnected edge.");var t=this._und_edges[e];t&&(delete this._und_edges[e],this._und_degree-=1),t=this._in_edges[e],t&&(delete this._in_edges[e],this._in_degree-=1),t=this._out_edges[e],t&&(delete this._out_edges[e],this._out_degree-=1)},e.prototype.clearOutEdges=function(){this._out_edges={},this._out_degree=0},e.prototype.clearInEdges=function(){this._in_edges={},this._in_degree=0},e.prototype.clearUndEdges=function(){this._und_edges={},this._und_degree=0},e.prototype.clearEdges=function(){this.clearInEdges(),this.clearOutEdges(),this.clearUndEdges()},e.prototype.prevNodes=function(){var e,t,r=[];for(e in this._in_edges)this._in_edges.hasOwnProperty(e)&&(t=this._in_edges[e],r.push({node:t.getNodes().a,edge:t}));return r},e.prototype.nextNodes=function(){var e,t,r=[];for(e in this._out_edges)this._out_edges.hasOwnProperty(e)&&(t=this._out_edges[e],r.push({node:t.getNodes().b,edge:t}));return r},e.prototype.connNodes=function(){var e,t,r=[];for(e in this._und_edges)if(this._und_edges.hasOwnProperty(e)){t=this._und_edges[e];var n=t.getNodes();n.a===this?r.push({node:t.getNodes().b,edge:t}):r.push({node:t.getNodes().a,edge:t})}return r},e.prototype.reachNodes=function(e){var t=0;return n.mergeArrays([this.nextNodes(),this.connNodes()],e||function(e){return t++})},e.prototype.clone=function(){var t=new e(this._id);return t.setFeatures(this.getFeatures()),t},e}();t.BaseNode=o},function(e,t,r){"use strict";function n(e){if(null===e||"object"!=typeof e)return e;if(!(e instanceof d.BaseNode||e instanceof u.BaseEdge)){var t=e.constructor?e.constructor():{};for(var r in e)e.hasOwnProperty(r)&&("object"==typeof e[r]?t[r]=n(e[r]):t[r]=e[r]);return t}}function o(e,t){void 0===t&&(t=void 0);for(var r in e)if(!Array.isArray(e[r]))throw new Error("Will only mergeArrays arrays");for(var n,o={},i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].length;a++)n="undefined"!=typeof t?t(e[s][a]):e[s][a],o[n]!==!0&&(i.push(e[s][a]),o[n]=!0);return i}function i(e){for(var t=0;t<e.length;t++)if("[object Object]"!==Object.prototype.toString.call(e[t]))throw new Error("Will only take objects as inputs");for(var r={},t=0;t<e.length;t++)for(var n in e[t])e[t].hasOwnProperty(n)&&(r[n]=e[t][n]);return r}function s(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function a(e,t){var r=[],n=0,o=0;if(null!=e[0]&&null!=t[0])for(;;){if(n>=e.length||o>=t.length)break;e[n]!=t[o]?e[n]<t[o]?(r.push(e[n]),n++):t[o]<e[n]&&(r.push(t[o]),o++):(r[r.length-1]!=e[n]&&r.push(e[n]),n++,o++)}for(;n<e.length;)null!=e[n]&&r.push(e[n]),n++;for(;o<t.length;)null!=t[o]&&r.push(t[o]),o++;return r}Object.defineProperty(t,"__esModule",{value:!0});var d=r(8),u=r(10);t.clone=n,t.mergeArrays=o,t.mergeObjects=i,t.findKey=s,t.mergeOrderedArraysNoDups=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=function(){function e(e,t,r,o){if(this._id=e,this._node_a=t,this._node_b=r,!(t instanceof n.BaseNode&&r instanceof n.BaseNode))throw new Error("cannot instantiate edge without two valid node objects");o=o||{},this._directed=o.directed||!1,this._weighted=o.weighted||!1,this._weight=this._weighted?isNaN(o.weight)?1:o.weight:void 0,this._label=o.label||this._id}return e.prototype.getID=function(){return this._id},e.prototype.getLabel=function(){return this._label},e.prototype.setLabel=function(e){this._label=e},e.prototype.isDirected=function(){return this._directed},e.prototype.isWeighted=function(){return this._weighted},e.prototype.getWeight=function(){return this._weight},e.prototype.setWeight=function(e){if(!this._weighted)throw new Error("Cannot set weight on unweighted edge.");this._weight=e},e.prototype.getNodes=function(){return{a:this._node_a,b:this._node_b}},e.prototype.clone=function(t,r){if(!(t instanceof n.BaseNode&&r instanceof n.BaseNode))throw new Error("refusing to clone edge if any new node is invalid");return new e(this._id,t,r,{directed:this._directed,weighted:this._weighted,weight:this._weight,label:this._label})},e}();t.BaseEdge=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),o=function(){function e(e){this.config=null,this.config=e||n.RUN_CONFIG}return e.prototype.log=function(e){return this.config.log_level===n.LOG_LEVELS.debug&&(console.log.apply(console,Array.prototype.slice.call(arguments)),!0)},e.prototype.error=function(e){return this.config.log_level===n.LOG_LEVELS.debug&&(console.error.apply(console,Array.prototype.slice.call(arguments)),!0)},e.prototype.dir=function(e){return this.config.log_level===n.LOG_LEVELS.debug&&(console.dir.apply(console,Array.prototype.slice.call(arguments)),!0)},e.prototype.info=function(e){return this.config.log_level===n.LOG_LEVELS.debug&&(console.info.apply(console,Array.prototype.slice.call(arguments)),!0)},e.prototype.warn=function(e){return this.config.log_level===n.LOG_LEVELS.debug&&(console.warn.apply(console,Array.prototype.slice.call(arguments)),!0)},e}();t.Logger=o},function(e,t,r){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={debug:"debug",production:"production"};t.LOG_LEVELS=r;var n={log_level:e.env.G_LOG};t.RUN_CONFIG=n}).call(t,r(13))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function i(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function s(){p&&g&&(p=!1,g.length?l=g.concat(l):f=-1,l.length&&a())}function a(){if(!p){var e=o(s);p=!0;for(var t=l.length;t;){for(g=l,l=[];++f<t;)g&&g[f].run();f=-1,t=l.length}g=null,p=!1,i(e)}}function d(e,t){this.fun=e,this.array=t}function u(){}var h,c,_=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var g,l=[],p=!1,f=-1;_.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||p||o(a)},d.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=u,_.addListener=u,_.once=u,_.off=u,_.removeListener=u,_.removeAllListeners=u,_.emit=u,_.prependListener=u,_.prependOnceListener=u,_.listeners=function(e){return[]},_.binding=function(e){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(e){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},function(e,t,r){"use strict";function n(e,t,r){var r=r||o(),n=r.callbacks,a=r.dir_mode;if(e.getMode()===i.GraphMode.INIT)throw new Error("Cowardly refusing to traverse graph without edges.");
if(a===i.GraphMode.INIT)throw new Error("Cannot traverse a graph with dir_mode set to INIT.");var d={marked:{},nodes:e.getNodes(),queue:[],current:null,next_node:null,next_edge:null,root_node:t,adj_nodes:[]};n.init_bfs&&s.execCallbacks(n.init_bfs,d),d.queue.push(t);for(var u=0;u<d.queue.length;){d.current=d.queue[u++],a===i.GraphMode.MIXED?d.adj_nodes=d.current.reachNodes():a===i.GraphMode.UNDIRECTED?d.adj_nodes=d.current.connNodes():a===i.GraphMode.DIRECTED?d.adj_nodes=d.current.nextNodes():d.adj_nodes=[],"function"==typeof n.sort_nodes&&n.sort_nodes(d);for(var h in d.adj_nodes)d.next_node=d.adj_nodes[h].node,d.next_edge=d.adj_nodes[h].edge,r.result[d.next_node.getID()].distance===Number.POSITIVE_INFINITY?n.node_unmarked&&s.execCallbacks(n.node_unmarked,d):n.node_marked&&s.execCallbacks(n.node_marked,d)}return r.result}function o(){var e={result:{},callbacks:{init_bfs:[],node_unmarked:[],node_marked:[],sort_nodes:void 0},dir_mode:i.GraphMode.MIXED,messages:{},filters:{}},t=e.result,r=e.callbacks,n=0,o=function(){return n++},s=function(t){for(var r in t.nodes)e.result[r]={distance:Number.POSITIVE_INFINITY,parent:null,counter:-1};e.result[t.root_node.getID()]={distance:0,parent:t.root_node,counter:o()}};r.init_bfs.push(s);var a=function(r){e.result[r.next_node.getID()]={distance:t[r.current.getID()].distance+1,parent:r.current,counter:o()},r.queue.push(r.next_node)};return r.node_unmarked.push(a),e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),s=r(15);t.BFS=n,t.prepareBFSStandardConfig=o},function(e,t){"use strict";function r(e,t){e.forEach(function(e){if("function"!=typeof e)throw new Error("Provided callback is not a function.");e(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.execCallbacks=r},function(e,t,r){"use strict";function n(e,t,r){var n={stack:[],adj_nodes:[],stack_entry:null,current:null,current_root:t},r=r||i(),o=r.callbacks,s=r.dir_mode;if(e.getMode()===a.GraphMode.INIT)throw new Error("Cowardly refusing to traverse graph without edges.");if(s===a.GraphMode.INIT)throw new Error("Cannot traverse a graph with dir_mode set to INIT.");for(o.init_dfs_visit&&d.execCallbacks(o.init_dfs_visit,n),n.stack.push({node:t,parent:t,weight:0});n.stack.length;)if(n.stack_entry=n.stack.pop(),n.current=n.stack_entry.node,o.node_popped&&d.execCallbacks(o.node_popped,n),r.dfs_visit_marked[n.current.getID()])o.node_marked&&d.execCallbacks(o.node_marked,n);else{r.dfs_visit_marked[n.current.getID()]=!0,o.node_unmarked&&d.execCallbacks(o.node_unmarked,n),s===a.GraphMode.MIXED?n.adj_nodes=n.current.reachNodes():s===a.GraphMode.UNDIRECTED?n.adj_nodes=n.current.connNodes():s===a.GraphMode.DIRECTED&&(n.adj_nodes=n.current.nextNodes()),"function"==typeof o.sort_nodes&&o.sort_nodes(n);for(var u in n.adj_nodes)n.stack.push({node:n.adj_nodes[u].node,parent:n.current,weight:n.adj_nodes[u].edge.getWeight()});o.adj_nodes_pushed&&d.execCallbacks(o.adj_nodes_pushed,n)}return r.visit_result}function o(e,t,r){var r=r||s(),o=r.callbacks,i=r.dir_mode;if(e.getMode()===a.GraphMode.INIT)throw new Error("Cowardly refusing to traverse graph without edges.");if(i===a.GraphMode.INIT)throw new Error("Cannot traverse a graph with dir_mode set to INIT.");var u={marked:{},nodes:e.getNodes()};o.init_dfs&&d.execCallbacks(o.init_dfs,u),o.adj_nodes_pushed=o.adj_nodes_pushed||[];var h=function(e){u.marked[e.current.getID()]=!0};o.adj_nodes_pushed.push(h);var c=[{}],_=0,g=0,l=function(){return g++},p=function(e){c[_][e.current.getID()]={parent:e.stack_entry.parent,counter:l()}};o&&o.node_unmarked&&o.node_unmarked.push(p),n(e,t,r);for(var f in u.nodes)u.marked[f]||(_++,c.push({}),n(e,u.nodes[f],r));return c}function i(){var e={visit_result:{},callbacks:{},messages:{},dfs_visit_marked:{},dir_mode:a.GraphMode.MIXED},t=e.visit_result,r=e.callbacks,n=0,o=function(){return n++};r.init_dfs_visit=r.init_dfs_visit||[];var i=function(e){t[e.current_root.getID()]={parent:e.current_root}};r.init_dfs_visit.push(i),r.node_unmarked=r.node_unmarked||[];var s=function(e){t[e.current.getID()]={parent:e.stack_entry.parent,counter:o()}};return r.node_unmarked.push(s),e}function s(){var e=i(),t=e.callbacks;e.visit_result;t.init_dfs=t.init_dfs||[];var r=function(e){};return t.init_dfs.push(r),e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),d=r(15);t.DFSVisit=n,t.DFS=o,t.prepareDFSVisitStandardConfig=i,t.prepareDFSStandardConfig=s},function(e,t,r){"use strict";function n(e,t){if(null==e||null==t)throw new Error("Graph as well as start node have to be valid objects.");if(0===e.nrDirEdges()&&0===e.nrUndEdges())throw new Error("Cowardly refusing to traverse a graph without edges.");if(!e.hasNodeID(t.getID()))throw new Error("Cannot start from an outside node.")}function o(e,t){function r(e,t,r){d=u[e]+r,u[t]>d&&(u[t]=d)}function o(e,t,r){return u[t]>u[e]+r}n(e,t);for(var i,a,d,u=[],h=e.getNodes(),c=Object.keys(h),_={},g=!1,l=0;l<c.length;++l)a=h[c[l]],u[l]=a===t?0:Number.POSITIVE_INFINITY,_[a.getID()]=l;for(var p=e.getDirEdgesArray().concat(e.getUndEdgesArray()),f=[],y=0;y<p.length;++y){i=p[y];f.push([_[i.getNodes().a.getID()],_[i.getNodes().b.getID()],isFinite(i.getWeight())?i.getWeight():s.DEFAULT_WEIGHT,i.isDirected()])}for(var E=0;E<c.length-1;++E)for(var y=0;y<f.length;++y)i=f[y],r(i[0],i[1],i[2]),!i[3]&&r(i[1],i[0],i[2]);for(var y=0;y<f.length;++y)if(i=f[y],o(i[0],i[1],i[2])||!i[3]&&o(i[1],i[0],i[2])){g=!0;break}return{distances:u,neg_cycle:g}}function i(e,t){function r(e,t,r){c=g[e]+r,g[t]>c&&(g[t]=c)}function o(e,t,r){return g[t]>g[e]+r}n(e,t);var i,a,d,u,h,c,_,g={},l=!1;g={},i=e.getDirEdgesArray().concat(e.getUndEdgesArray()),_=e.nrNodes();for(var p in e.getNodes())g[p]=Number.POSITIVE_INFINITY;g[t.getID()]=0;for(var f=0;f<_-1;++f)for(var y=0;y<i.length;++y)a=i[y],d=a.getNodes().a.getID(),u=a.getNodes().b.getID(),h=isFinite(a.getWeight())?a.getWeight():s.DEFAULT_WEIGHT,r(d,u,h),!a.isDirected()&&r(u,d,h);for(var E in i)a=i[E],d=a.getNodes().a.getID(),u=a.getNodes().b.getID(),h=isFinite(a.getWeight())?a.getWeight():s.DEFAULT_WEIGHT,(o(d,u,h)||!a.isDirected()&&o(u,d,h))&&(l=!0);return{distances:g,neg_cycle:l}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(18);t.BellmanFordArray=o,t.BellmanFordDict=i},function(e,t,r){"use strict";function n(e,r,n){var n=n||o(),u=n.callbacks,h=n.dir_mode,c=n.evalPriority,_=n.evalObjID;if(e.getMode()===s.GraphMode.INIT)throw new Error("Cowardly refusing to traverse graph without edges.");if(h===s.GraphMode.INIT)throw new Error("Cannot traverse a graph with dir_mode set to INIT.");var g={node:r,edge:new i.BaseEdge("virtual start edge",r,r,{weighted:!0,weight:0}),best:0},l={OPEN_HEAP:new d.BinaryHeap(d.BinaryHeapMode.MIN,c,_),OPEN:{},CLOSED:{},nodes:e.getNodes(),root_node:r,current:g,adj_nodes:[],next:null,proposed_dist:Number.POSITIVE_INFINITY};for(u.init_pfs&&a.execCallbacks(u.init_pfs,l),l.OPEN_HEAP.insert(g),l.OPEN[g.node.getID()]=g;l.OPEN_HEAP.size();){if(l.current=l.OPEN_HEAP.pop(),u.new_current&&a.execCallbacks(u.new_current,l),null==l.current&&console.log("HEAP popped undefined - HEAP size: "+l.OPEN_HEAP.size()),l.OPEN[l.current.node.getID()]=void 0,l.CLOSED[l.current.node.getID()]=l.current,l.current.node===n.goal_node)return n.callbacks.goal_reached&&a.execCallbacks(n.callbacks.goal_reached,l),n.result;if(h===s.GraphMode.MIXED)l.adj_nodes=l.current.node.reachNodes();else if(h===s.GraphMode.UNDIRECTED)l.adj_nodes=l.current.node.connNodes();else{if(h!==s.GraphMode.DIRECTED)throw new Error("Unsupported traversal mode. Please use directed, undirected, or mixed");l.adj_nodes=l.current.node.nextNodes()}for(var p in l.adj_nodes)l.next=l.adj_nodes[p],l.CLOSED[l.next.node.getID()]?n.callbacks.node_closed&&a.execCallbacks(n.callbacks.node_closed,l):l.OPEN[l.next.node.getID()]?(l.next.best=l.OPEN[l.next.node.getID()].best,n.callbacks.node_open&&a.execCallbacks(n.callbacks.node_open,l),l.proposed_dist=l.current.best+(isNaN(l.next.edge.getWeight())?t.DEFAULT_WEIGHT:l.next.edge.getWeight()),l.next.best>l.proposed_dist?(n.callbacks.better_path&&a.execCallbacks(n.callbacks.better_path,l),l.OPEN_HEAP.remove(l.next),l.next.best=l.proposed_dist,l.OPEN_HEAP.insert(l.next),l.OPEN[l.next.node.getID()].best=l.proposed_dist):l.next.best===l.proposed_dist&&n.callbacks.equal_path&&a.execCallbacks(n.callbacks.equal_path,l)):(n.callbacks.not_encountered&&a.execCallbacks(n.callbacks.not_encountered,l),l.OPEN_HEAP.insert(l.next),l.OPEN[l.next.node.getID()]=l.next)}return n.result}function o(){var e={result:{},callbacks:{init_pfs:[],new_current:[],not_encountered:[],node_open:[],node_closed:[],better_path:[],equal_path:[],goal_reached:[]},messages:{init_pfs_msgs:[],new_current_msgs:[],not_enc_msgs:[],node_open_msgs:[],node_closed_msgs:[],better_path_msgs:[],equal_path_msgs:[],goal_reached_msgs:[]},dir_mode:s.GraphMode.MIXED,goal_node:null,evalPriority:function(e){return e.best||t.DEFAULT_WEIGHT},evalObjID:function(e){return e.node.getID()}},r=e.callbacks,n=0,o=function(){return n++},i=function(t){for(var r in t.nodes)e.result[r]={distance:Number.POSITIVE_INFINITY,parent:null,counter:-1};e.result[t.root_node.getID()]={distance:0,parent:t.root_node,counter:o()}};r.init_pfs.push(i);var a=function(r){r.next.best=r.current.best+(isNaN(r.next.edge.getWeight())?t.DEFAULT_WEIGHT:r.next.edge.getWeight()),e.result[r.next.node.getID()]={distance:r.next.best,parent:r.current.node,counter:void 0}};r.not_encountered.push(a);var d=function(t){e.result[t.next.node.getID()].distance=t.proposed_dist,e.result[t.next.node.getID()].parent=t.current.node};return r.better_path.push(d),e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(10),s=r(7),a=r(15),d=r(19);t.DEFAULT_WEIGHT=1,t.PFS=n,t.preparePFSStandardConfig=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX"}(r=t.BinaryHeapMode||(t.BinaryHeapMode={}));var n=function(){function e(e,t,n){void 0===e&&(e=r.MIN),void 0===t&&(t=function(e){return"number"!=typeof e&&"string"!=typeof e?NaN:"number"==typeof e?0|e:parseInt(e)}),void 0===n&&(n=function(e){return e}),this._mode=e,this._evalPriority=t,this._evalObjID=n,this._nr_removes=0,this._array=[],this._positions={}}return e.prototype.getMode=function(){return this._mode},e.prototype.getArray=function(){return this._array},e.prototype.getPositions=function(){return this._positions},e.prototype.size=function(){return this._array.length},e.prototype.getEvalPriorityFun=function(){return this._evalPriority},e.prototype.evalInputScore=function(e){return this._evalPriority(e)},e.prototype.getEvalObjIDFun=function(){return this._evalObjID},e.prototype.evalInputObjID=function(e){return this._evalObjID(e)},e.prototype.peek=function(){return this._array[0]},e.prototype.pop=function(){if(this.size())return this.remove(this._array[0])},e.prototype.find=function(e){var t=this.getNodePosition(e);return this._array[t]},e.prototype.insert=function(e){if(isNaN(this._evalPriority(e)))throw new Error("Cannot insert object without numeric priority.");this._array.push(e),this.setNodePosition(e,this.size()-1),this.trickleUp(this.size()-1)},e.prototype.remove=function(e){if(this._nr_removes++,isNaN(this._evalPriority(e)))throw new Error("Object invalid.");var t=(this._evalObjID(e),null),r=this.getNodePosition(e),t=null!=this._array[r]?this._array[r]:null;if(null!==t){var n=this._array.pop();return this.removeNodePosition(e),this.size()&&t!==n&&(this._array[r]=n,this.setNodePosition(n,r),this.trickleUp(r),this.trickleDown(r)),t}},e.prototype.trickleDown=function(e){for(var t=this._array[e];;){var r=2*(e+1),n=r-1,o=this._array[r],i=this._array[n],s=null;if(n<this.size()&&!this.orderCorrect(t,i)&&(s=n),r<this.size()&&!this.orderCorrect(t,o)&&!this.orderCorrect(i,o)&&(s=r),null===s)break;this._array[e]=this._array[s],this._array[s]=t,this.setNodePosition(this._array[e],e),this.setNodePosition(this._array[s],s),e=s}},e.prototype.trickleUp=function(e){for(var t=this._array[e];e;){var r=Math.floor((e+1)/2)-1,n=this._array[r];if(this.orderCorrect(n,t))break;this._array[r]=t,this._array[e]=n,this.setNodePosition(t,r),this.setNodePosition(n,e),e=r}},e.prototype.orderCorrect=function(e,t){var n=this._evalPriority(e),o=this._evalPriority(t);return this._mode===r.MIN?n<=o:n>=o},e.prototype.setNodePosition=function(e,t){if(null==e||null==t||t!==(0|t))throw new Error("minium required arguments are obj and new_pos");var r={score:this.evalInputScore(e),position:t},n=this.evalInputObjID(e);this._positions[n]=r},e.prototype.getNodePosition=function(e){var t=this.evalInputObjID(e),r=this._positions[t];return r?r.position:null},e.prototype.removeNodePosition=function(e){var t=this.evalInputObjID(e);delete this._positions[t]},e}();t.BinaryHeap=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),o=r(11),i=(new o.Logger,function(){function e(e){this._graph=e}return e.prototype.randomlyDeleteNodesPercentage=function(e){e>100&&(e=100);var t=Math.ceil(this._graph.nrNodes()*e/100);this.randomlyDeleteNodesAmount(t)},e.prototype.randomlyDeleteUndEdgesPercentage=function(e){e>100&&(e=100);var t=Math.ceil(this._graph.nrUndEdges()*e/100);this.randomlyDeleteUndEdgesAmount(t)},e.prototype.randomlyDeleteDirEdgesPercentage=function(e){e>100&&(e=100);var t=Math.ceil(this._graph.nrDirEdges()*e/100);this.randomlyDeleteDirEdgesAmount(t)},e.prototype.randomlyDeleteNodesAmount=function(e){if(e<0)throw"Cowardly refusing to remove a negative amount of nodes";if(0!==this._graph.nrNodes())for(var t=0,r=this._graph.pickRandomProperties(this._graph.getNodes(),e);t<r.length;t++)this._graph.deleteNode(this._graph.getNodes()[r[t]])},e.prototype.randomlyDeleteUndEdgesAmount=function(e){if(e<0)throw"Cowardly refusing to remove a negative amount of edges";if(0!==this._graph.nrUndEdges())for(var t=0,r=this._graph.pickRandomProperties(this._graph.getUndEdges(),e);t<r.length;t++)this._graph.deleteEdge(this._graph.getUndEdges()[r[t]])},e.prototype.randomlyDeleteDirEdgesAmount=function(e){if(e<0)throw"Cowardly refusing to remove a negative amount of edges";if(0!==this._graph.nrDirEdges())for(var t=0,r=this._graph.pickRandomProperties(this._graph.getDirEdges(),e);t<r.length;t++)this._graph.deleteEdge(this._graph.getDirEdges()[r[t]])},e.prototype.randomlyAddUndEdgesPercentage=function(e){var t=Math.ceil(this._graph.nrUndEdges()*e/100);this.randomlyAddEdgesAmount(t,{directed:!1})},e.prototype.randomlyAddDirEdgesPercentage=function(e){var t=Math.ceil(this._graph.nrDirEdges()*e/100);this.randomlyAddEdgesAmount(t,{directed:!0})},e.prototype.randomlyAddEdgesAmount=function(e,t){if(e<=0)throw new Error("Cowardly refusing to add a non-positive amount of edges");for(var r,n,o=!(!t||!t.directed)&&t.directed,i=o?"_d":"_u";e;){for(r=this._graph.getRandomNode();(n=this._graph.getRandomNode())===r;);var s=r.getID()+"_"+n.getID()+i;r.hasEdgeID(s)||(this._graph.addEdgeByID(s,r,n,{directed:o}),--e)}},e.prototype.randomlyAddNodesPercentage=function(e,t){var r=Math.ceil(this._graph.nrNodes()*e/100);this.randomlyAddNodesAmount(r,t)},e.prototype.randomlyAddNodesAmount=function(e,t){if(e<0)throw"Cowardly refusing to add a negative amount of nodes";for(var r={};e--;){var o=n.randBase36String();r[o]=this._graph.addNodeByID(o)}null!=t&&this.createEdgesByConfig(t,r)},e.prototype.createEdgesByConfig=function(e,t){var r,n,o;null!=e.und_degree||null!=e.dir_degree||null!=e.min_und_degree&&null!=e.max_und_degree||null!=e.min_dir_degree&&null!=e.max_dir_degree?(null!=(r=e.und_degree)?this.createRandomEdgesSpan(r,r,!1,t):null!=(n=e.min_und_degree)&&null!=(o=e.max_und_degree)&&this.createRandomEdgesSpan(n,o,!1,t),(r=e.dir_degree)?this.createRandomEdgesSpan(r,r,!0,t):null!=(n=e.min_dir_degree)&&null!=(o=e.max_dir_degree)&&this.createRandomEdgesSpan(n,o,!0,t)):(null!=e.probability_dir&&this.createRandomEdgesProb(e.probability_dir,!0,t),null!=e.probability_und&&this.createRandomEdgesProb(e.probability_und,!1,t))},e.prototype.createRandomEdgesProb=function(e,t,r){if(0>e||1<e)throw new Error("Probability out of range.");t=t||!1,r=r||this._graph.getNodes();var n,o,i,s=this._graph.getNodes(),a=t?"_d":"_u";for(n in r)for(o in s)if(n!==o&&Math.random()<=e){if(i=s[n].getID()+"_"+s[o].getID()+a,this._graph.getNodes()[n].hasEdgeID(i))continue;this._graph.addEdgeByID(i,s[n],s[o],{directed:t})}},e.prototype.createRandomEdgesSpan=function(e,t,r,n){if(e<0)throw new Error("Minimum degree cannot be negative.");if(t>=this._graph.nrNodes())throw new Error("Maximum degree exceeds number of reachable nodes.");if(e>t)throw new Error("Minimum degree cannot exceed maximum degree.");r=r||!1;var o,i,s,a,d,u,e=0|e,t=0|t,h=n||this._graph.getNodes(),c=this._graph.getNodes(),_=Object.keys(c),g=_.length,l=r?"_d":"_u";for(o in h)for(i=h[o],d=0,u=Math.random()*(t-e)+e|0;u;)if(d=g*Math.random()|0,s=c[_[d]],i!==s){if(a=i.getID()+"_"+s.getID()+l,i.hasEdgeID(a))continue;this._graph.addEdgeByID(a,i,s,{directed:r}),--u}},e}());t.SimplePerturber=i},function(e,t){"use strict";function r(){return(Math.random()+1).toString(36).substr(2,24)}function n(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=1),void 0===r&&(r=!1),r?Math.floor(n(e,t,!1)):Math.random()*(t-e)+e}function o(e,t){this.v2=null;var r,n,o,i,s;if(void 0===e&&(e=0),void 0===t&&(t=1),null===this.v2){do r=Math.random(),n=Math.random(),o=2*r-1,i=2*n-1,s=o*o+i*i;while(0===s||s>=1);return this.v2=i*Math.sqrt(-2*Math.log(s)/s),t*o*Math.sqrt(-2*Math.log(s)/s)+e}return i=this.v2,this.v2=null,t*i+e}function i(e){void 0===e&&(e=1);var t,r,n=0;for(t=0;t<e;t++)r=o(),n+=r*r;return n}function s(e){void 0===e&&(e=1);var t=Math.exp(-e),r=0,n=1;do r++,n*=Math.random();while(n>t);return r-1}function a(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var r,n=o();do r=o();while(0===r);return e+t*n/r}function d(e){return Math.random()<e?1:0}function u(e){return function(){var t,r,n,o;for(o=[].slice.call(arguments),t=o.shift(),r=[],n=0;n<t;n++)r.push(e.apply(this,o));return r}}function h(e,t){t=t||10;var r,n,o,i=Math.max.apply(this,e),s=Math.min.apply(this,e);if(i===s)return[e.length];for(r=[],n=0;n<t;n++)r.push(0);for(n=0;n<e.length;n++)o=(e[n]-s)/(i-s),o*=t,o=Math.floor(o),o===t&&o--,r[o]++;return r}function c(e){return e[n(0,e.length,!0)]}Object.defineProperty(t,"__esModule",{value:!0}),t.randBase36String=r,t.runif=n,t.rnorm=o,t.rchisq=i,t.rpoisson=s,t.rcauchy=a,t.rbernoulli=d,t.histogram=h,t.rlist=c;var _=u(n);t.rvunif=_;var g=u(o);t.rvnorm=g;var l=u(i);t.rvchisq=l;var p=u(s);t.rvpoisson=p;var f=u(a);t.rvcauchy=f;var y=u(d);t.rvbernoulli=y;var E=u(c);t.rvlist=E},function(e,t){"use strict";var r={REMOTE_URL:"http://berndmalle.com/anonymization/adults",REMOTE_TARGET:"education",INPUT_FILE:"./test/io/test_input/house_data.csv",TRIM:"",TRIM_MOD:"",SEPARATOR:"\\s+",SEP_MOD:"g",TARGET_COLUMN:"MEDV",AVERAGE_OUTPUT_RANGES:!0,NR_DRAWS:506,RANDOM_DRAWS:!1,EDGE_MIN:3,EDGE_MAX:10,K_FACTOR:19,ALPHA:1,BETA:0,GEN_WEIGHT_VECTORS:{equal:{range:{CRIM:1/13,ZN:1/13,INDUS:1/13,CHAS:1/13,NOX:1/13,RM:1/13,AGE:1/13,DIS:1/13,RAD:1/13,TAX:1/13,PTRATIO:1/13,B:1/13,LSTAT:1/13}}},VECTOR:"equal"};t.CONFIG=r}]);